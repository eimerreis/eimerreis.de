---
title: Using tailwind with twin.macro
description: "Over the years, we shifted from CSS/SCSS based styles, over to CSS-in-JS with styled.components, over to tailwindcss. Through this slight migration, we integrated twin.macro into our codebase. Here's what I learned from it."
date: December 5 2022
---

> Disclaimer:  
> I just share my personal experiences with the technologies described, with the knowledge and skill I had at this point in time. I am aware that there might have been alternative solutions for the problems described.

Having plenty of different applications in our company all of them being created at different points in time with different knowledge and skillset,
we also faced ourselves wanting to try this fancy tailwind thing out once bootstraping a new application. Since introducing new technologies always involves
breaking your current habits and workflows, I tried to find a way to integrate `tailwind` together with `styled-components` which we used at that time. 

## Why even use tailwind?

I guess there are a lot of other articles about this topic on the internet, so I'll just quickly list the main pros i see in using tailwind

- Simplified usage of complicated css properties like `box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05)` just being `shadow-sm` in tailwind
- Reducing design inconsistencies through not encouraging the use of `arbitrary-values`. This basically means you should not define exact values 
(like padding: 3px) on an element and instead use classnames your design system provides. Especially in a team where you do not have a dedicated designer
I found this very benefitial.
- Having very well defined defaults. Even though we had some kind of a design system in place, we basically just overwrote the colors and defined other font families. 

## Why combine it with styled-components?

At the time I was stumbling upon tailwind I was just about to re-design one of our existing applications, which was developed using `styled-components`. 
Since the product was already shipped to production, an incremental migration was absolutely crucial.
Besides this business implication there also were some use-cases where `styled-components` came in quite handy:

### Conditional styles

As an alternative to the approach of packages like [classnames](https://www.npmjs.com/package/classnames), we did have to change our approach of doing conditional styles

```tsx
const StyledButton = styled.button`
    ${({ disabled }) => disabled && tw`pointer-events-none bg-opacity-30`}

	svg {
		${tw`text-gray-300`}
	}
`
```

### Styling child elements

When styling child elements of something you could leverage SCSS syntax. This was especially useful when you were just receiving the child elements via the `children` prop
```tsx
// with twin.macro & styled-components
const StyledButton = styled.button`
	svg {
		${tw`text-gray-300`}
	}
`

// with plain tailwind, you would need to use React.cloneElement(children) and override the classname 
// to achieve the thing above and still would need a bit more complicated logic to only style `svg` children
const Button = (props) => <StyledButton {...props}>{props.children}</StyledButton>

// using the button 
const AddButton = () => <Button><AddIcon />Add Todo</Button>
const DeleteButton = () => <Button><DeleteIcon />Add Todo</Button>;

// whereas with plain tailwind, you would have needed to define the classname on the icon itself
const AddButton = () => <Button><AddIcon className="text-gray-300" />Add Todo</Button>
const DeleteButton = () => <Button><DeleteIcon className="text-gray-300" />Add Todo</Button>;
```

### Grouping variants

Using twin.macro you could group variants via parentheses. This was especially useful as our application defined a `dark:` variant. This is possible 
due to `twin.macro` being a `babel` macro and being able to compile the content of the parentheses down to what tailwind expected.
```tsx
// without twin.macro 
const Button = () => <button className="dark:bg-slate-100 dark:border-slate-200 dark:hover:bg-slate-300" />

// with twin macro 
const Button = () => <button className="dark:(bg-slate-100 border-slate-200 hover:bg-slate-300)" />
```

## Downsides of using twin.macro

Although twin.macro seems like a good fit, we encountered several issue within our technology combination for styling.

- twin.macro is always behind the current version of tailwindcss as it needs to implement support for every version
- twin.macro is based on babel macros, so we need additional configuration for our build pipeline
- We create a **direct** dependency to a build tool within source code.
    
    ```tsx
    // all tw keywords will be parsed by the babel macro  
    const x = styled.div`${tw``}`
    
    <div tw="bg-indigo-100" />
    ```
    
    If we want to opt-out of using babel (new build tools are on the horizion, that are likely to deprecate javascript-based bundlers - see [https://turbo.build/pack](https://turbo.build/pack), [https://esbuild.github.io/](https://esbuild.github.io/) [https://swc.rs/](https://swc.rs/)) we will need to do code changes first
        
- twin.macro supports several combinations of dev servers and css-in-js libraries. If e.g. styled-components has a bug, which affects twin.macro as well (we had this situation with )
    - [https://github.com/ben-rogerson/twin.macro/issues/277](https://github.com/ben-rogerson/twin.macro/issues/277)
    - [https://github.com/ben-rogerson/twin.macro/issues/310](https://github.com/ben-rogerson/twin.macro/issues/310)
    - [https://github.com/ben-rogerson/twin.macro/issues/536](https://github.com/ben-rogerson/twin.macro/issues/536)

- Currently blocks us from using CRA 5

## Solving the child element problem

- Since tailwind v3.1 the so called `arbitrary variants` are now supported. See [https://tailwindcss.com/docs/hover-focus-and-other-states#using-arbitrary-variants](https://tailwindcss.com/docs/hover-focus-and-other-states#using-arbitrary-variants)
    
```tsx
// before with twin.macro & styled-components
const Button = styled.button`
	svg {
		${tw`text-gray-300`}
	}
`

// with pure tailwind
const Button = ({ children }) => <button className="[&_svg]:text-gray-300">{children}</button>
```

## 

Go back [home](/).
